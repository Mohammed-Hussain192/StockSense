<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= user.name %> - Profile | StockSense</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="/styles/profile.css">
</head>
<body>
  <nav class="navbar">
    <a href="/home" class="logo">
      <i class="fas fa-chart-line"></i> StockSense
    </a>
    <div class="theme-toggle" id="themeToggle">
      <i class="fas fa-moon"></i>
      <span>Dark Mode</span>
    </div>
  </nav>

  <div class="main-content">
    <a href="/" class="back-link">
      <i class="fas fa-arrow-left"></i> Back to all stocks
    </a>

    <div class="profile-header">
      <h1 class="profile-title"><%= user.name %></h1>
    </div>

    <!-- Profile Information -->
    <div class="section">
      <h2 class="section-title">Profile Information</h2>
      <div class="card">
        <div class="stats-grid">
          <div class="stat-item">
            <div class="stat-label">Email</div>
            <div class="stat-value"><%= user.email %></div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Phone</div>
            <div class="stat-value"><%= user.phone %></div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Account Created</div>
            <div class="stat-value"><%= user.date %></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Watchlist Section -->
    <div class="section">
      <h2 class="section-title">Your Watchlist</h2>
      <div class="card">
        <% if (symbols && symbols.length > 0) { %>
          <div class="watchlist">
            <% symbols.forEach(symbol => { %>
              <a href="/stock/<%= symbol.symbol %>" class="symbol-item">
                <%= symbol.symbol %>
              </a>
            <% }); %>
          </div>
        <% } else { %>
          <p>No symbols in your watchlist yet.</p>
        <% } %>
        <a href="/home" class="btn">
          <i class="fas fa-plus"></i> Add Stocks
        </a>
      </div>
    </div>

    <!-- Account Actions -->
    <div class="section">
      <h2 class="section-title">Account Actions</h2>
      <div class="card">
        <a href="/" class="btn">
          <i class="fas fa-sign-out-alt"></i> Logout
        </a>
      </div>
    </div>
  </div>

  <script>
    // Theme toggle functionality
    document.getElementById('themeToggle').addEventListener('click', function() {
      document.body.classList.toggle('light-mode');
      const isLight = document.body.classList.contains('light-mode');
      this.innerHTML = `<i class="fas fa-${isLight ? 'sun' : 'moon'}"></i> ${isLight ? 'Light' : 'Dark'} Mode`;
      localStorage.setItem('theme', isLight ? 'light' : 'dark');
    });

    // Check for saved theme preference
    if (localStorage.getItem('theme') === 'light') {
      document.body.classList.add('light-mode');
      document.getElementById('themeToggle').innerHTML = '<i class="fas fa-sun"></i> Light Mode';
    }
  </script>
</body>
</html>